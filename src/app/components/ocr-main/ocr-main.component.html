<div id="wrapper" class="wrapper">
  <app-side-bar></app-side-bar>
  <form #uploadImgForm="ngForm" (ngSubmit)="onSubmit(uploadImgForm)">
    <div id="noImage" *ngIf='!srcLoad'>
      Preview
    </div>
    <img id="imgPrevSave" alt="">
    <div class="inputCont">
      <input
        type="text"
        name="documentName"
        #documentName="ngModel"
        [(ngModel)]="ocrImageModel.documentName"
        placeholder="Document Name"
        required
      >
      <input
        type="text"
        name="documentType"
        #documentType="ngModel"
        [(ngModel)]="ocrImageModel.documentType"
        placeholder="Document Type"
        required
      >
      <label for="uploadImg">
        <div class="indicador" *ngIf="imageFileName">
          <span>{{imageFileName}}</span>
        </div>
        <div class="indicador" *ngIf="!imageFileName">
          <span>Select an Image</span>
        </div>
      </label>
      <input
        id="uploadImg"
        (change)="imageLoaded($event)"
        type="file"
        name="image"
      >
      <input
        type="submit"
        value="Save"
        [disabled]="!uploadImgForm.form.valid"
        required
      >
    </div>
  </form>

  <div class="savedImages" [style.display]="(localDBEmpty)? 'block':'none'">
    <button type="button" class="btn-sync" [disabled]="!localDBEmpty" (click)="syncLocal()">Sync{{status | json}}</button>
    <p>
      This Images are Saved in your local Storage.
    </p>
    <p>
      When your Internet connection is back push the Sync Button to save your images to the server
    </p>
    <ul class="list-file" >
      <li class="item-file" *ngFor="let item of localSavedImages">
        <div class="trash" (click)="deleteImageLocal(item)">
          <i class="fas fa-trash-alt"></i>
        </div>
        <div class="block" (click)="clickImage({src:item.src})">
          <img
            id="imageToLoad"
            class="input-image"
            *ngIf="item.imageName"
            src="{{item.src}}"
          >
          <p>{{item.documentName}}</p>
          <p>{{item.documentType}}</p>
        </div>
      </li>
    </ul>
  </div>

  <div class="savedImages">
    <p *ngIf="!startTitle">
      The images you save will appear here
    </p>
    <p *ngIf="startTitle">
      Select an Image that you have saved to process it
    </p>
    <ul class="list-file" >
      <li class="item-file" *ngFor="let item of savedImages">
        <div class="trash" (click)="deleteImagesData(item._id)">
          <i class="fas fa-trash-alt"></i>
        </div>
        <div class="block" (click)="clickImage({src:item.imageName})">
          <img
            id="imageToLoad"
            class="input-image"
            *ngIf="item.imageName"
            src="https://ocr-angular-app.s3.us-east-2.amazonaws.com/{{item.imageName}}"
          >
         <p>{{item.documentName}}</p>
         <p>{{item.documentType}}</p>
        </div>
      </li>
    </ul>
  </div>
</div>

<app-loadwarnings
  *ngIf="modal"
  [okWarning]="okWarning"
  [errorWarning]="errorWarning"
  (deactivateErrorMessage)="modalOff($event)"
></app-loadwarnings>
